{"version":3,"file":"index.esm.js","sources":["../src/shared/ui/CalculatorDisplay.tsx","../src/shared/ui/CalculatorButton.tsx","../src/shared/lib/calculator.ts","../src/shared/lib/useCalculator.ts","../src/entities/Calculator.tsx"],"sourcesContent":["import React from 'react';\r\nimport { CalculatorTheme } from '../lib/types';\r\n\r\ninterface CalculatorDisplayProps {\r\n  value: string;\r\n  className?: string;\r\n  theme?: CalculatorTheme;\r\n}\r\n\r\nconst defaultTheme: Required<CalculatorTheme> = {\r\n  numberButton: 'bg-gray-200 hover:bg-gray-300 text-gray-800',\r\n  operationButton: 'bg-orange-500 hover:bg-orange-600 text-white',\r\n  functionButton: 'bg-gray-500 hover:bg-gray-600 text-white',\r\n  display: 'bg-gray-900 text-white',\r\n  container: 'bg-gray-100',\r\n};\r\n\r\nexport const CalculatorDisplay: React.FC<CalculatorDisplayProps> = ({\r\n  value,\r\n  className = '',\r\n  theme,\r\n}) => {\r\n  const currentTheme = { ...defaultTheme, ...theme };\r\n  const displayClass = currentTheme.display || 'bg-gray-900 text-white';\r\n\r\n  return (\r\n    <div className={`text-right p-3 sm:p-4 rounded-lg mb-3 sm:mb-4 ${displayClass} ${className}`}>\r\n      <div className=\"text-2xl sm:text-3xl font-mono min-h-[1.5rem] sm:min-h-[2rem] flex items-center justify-end overflow-hidden\">\r\n        {value || '0'}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport { CalculatorButtonProps, CalculatorTheme } from '../lib/types';\r\n\r\nconst defaultTheme: Required<CalculatorTheme> = {\r\n  numberButton: 'bg-gray-200 hover:bg-gray-300 text-gray-800',\r\n  operationButton: 'bg-orange-500 hover:bg-orange-600 text-white',\r\n  functionButton: 'bg-gray-500 hover:bg-gray-600 text-white',\r\n  display: 'bg-gray-900 text-white',\r\n  container: 'bg-gray-100',\r\n};\r\n\r\nexport const CalculatorButton: React.FC<CalculatorButtonProps & { theme?: CalculatorTheme }> = ({\r\n  value,\r\n  onClick,\r\n  className = '',\r\n  variant = 'number',\r\n  theme,\r\n}) => {\r\n  const currentTheme = { ...defaultTheme, ...theme };\r\n  const variantClass = currentTheme[`${variant}Button` as keyof CalculatorTheme] || '';\r\n  \r\n  const baseClasses = 'w-full h-12 sm:h-16 text-lg sm:text-xl font-semibold rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-blue-500';\r\n  \r\n  return (\r\n    <button\r\n      className={`${baseClasses} ${variantClass} ${className}`}\r\n      onClick={() => onClick(value)}\r\n      type=\"button\"\r\n    >\r\n      {value}\r\n    </button>\r\n  );\r\n};\r\n","import { CalculatorState, CalculatorOperation } from './types';\r\n\r\nexport const calculate = (\r\n  firstValue: number,\r\n  secondValue: number,\r\n  operation: CalculatorOperation\r\n): number => {\r\n  switch (operation) {\r\n    case '+':\r\n      return firstValue + secondValue;\r\n    case '-':\r\n      return firstValue - secondValue;\r\n    case '*':\r\n      return firstValue * secondValue;\r\n    case '/':\r\n      if (secondValue === 0) {\r\n        throw new Error('Division by zero');\r\n      }\r\n      return firstValue / secondValue;\r\n    default:\r\n      throw new Error('Unknown operation');\r\n  }\r\n};\r\n\r\nexport const formatDisplay = (value: number): string => {\r\n  if (Number.isNaN(value) || !Number.isFinite(value)) {\r\n    return 'Error';\r\n  }\r\n  \r\n  // 소수점 이하 10자리까지 표시하되, 불필요한 0은 제거\r\n  const formatted = value.toFixed(10);\r\n  return parseFloat(formatted).toString();\r\n};\r\n\r\nexport const isOperation = (value: string): value is CalculatorOperation => {\r\n  return ['+', '-', '*', '/', '=', 'C', 'CE'].includes(value);\r\n};\r\n\r\nexport const isNumber = (value: string): boolean => {\r\n  return /^\\d+$/.test(value);\r\n};\r\n\r\nexport const isDecimalPoint = (value: string): boolean => {\r\n  return value === '.';\r\n};\r\n","'use client'\r\nimport { useState, useCallback, useEffect } from 'react';\r\nimport { CalculatorState, CalculatorOperation } from '../lib/types';\r\nimport { calculate, formatDisplay, isOperation, isNumber, isDecimalPoint } from '../lib/calculator';\r\n\r\nconst initialState: CalculatorState = {\r\n  display: '0',\r\n  previousValue: null,\r\n  operation: null,\r\n  waitingForOperand: false,\r\n};\r\n\r\n// 키보드 매핑\r\nconst keyMapping: Record<string, string> = {\r\n  '0': '0', '1': '1', '2': '2', '3': '3', '4': '4',\r\n  '5': '5', '6': '6', '7': '7', '8': '8', '9': '9',\r\n  '+': '+', '-': '-', '*': '*', '/': '/',\r\n  '=': '=', 'Enter': '=', 'Escape': 'C',\r\n  '.': '.', ',': '.',\r\n  'c': 'C', 'C': 'C',\r\n  'Backspace': 'CE',\r\n};\r\n\r\nexport const useCalculator = (enableKeyboard: boolean = true) => {\r\n  const [state, setState] = useState<CalculatorState>(initialState);\r\n\r\n  const handleInput = useCallback((input: string) => {\r\n    setState(prevState => {\r\n      if (isNumber(input)) {\r\n        return handleNumberInput(prevState, input);\r\n      }\r\n      \r\n      if (isDecimalPoint(input)) {\r\n        return handleDecimalPointInput(prevState);\r\n      }\r\n      \r\n      if (isOperation(input)) {\r\n        return handleOperationInput(prevState, input as CalculatorOperation);\r\n      }\r\n      \r\n      return prevState;\r\n    });\r\n  }, []);\r\n\r\n  const handleNumberInput = (prevState: CalculatorState, input: string): CalculatorState => {\r\n    if (prevState.waitingForOperand) {\r\n      return {\r\n        ...prevState,\r\n        display: input,\r\n        waitingForOperand: false,\r\n      };\r\n    }\r\n    \r\n    return {\r\n      ...prevState,\r\n      display: prevState.display === '0' ? input : prevState.display + input,\r\n    };\r\n  };\r\n\r\n  const handleDecimalPointInput = (prevState: CalculatorState): CalculatorState => {\r\n    if (prevState.waitingForOperand) {\r\n      return {\r\n        ...prevState,\r\n        display: '0.',\r\n        waitingForOperand: false,\r\n      };\r\n    }\r\n    \r\n    if (prevState.display.indexOf('.') === -1) {\r\n      return {\r\n        ...prevState,\r\n        display: prevState.display + '.',\r\n      };\r\n    }\r\n    \r\n    return prevState;\r\n  };\r\n\r\n  const handleOperationInput = (prevState: CalculatorState, operation: CalculatorOperation): CalculatorState => {\r\n    if (operation === 'C') {\r\n      return initialState;\r\n    }\r\n    \r\n    if (operation === 'CE') {\r\n      return {\r\n        ...prevState,\r\n        display: '0',\r\n      };\r\n    }\r\n    \r\n    const inputValue = parseFloat(prevState.display);\r\n    \r\n    if (prevState.previousValue === null) {\r\n      return {\r\n        ...prevState,\r\n        previousValue: inputValue,\r\n        operation,\r\n        waitingForOperand: true,\r\n      };\r\n    }\r\n    \r\n    if (prevState.operation && !prevState.waitingForOperand) {\r\n      try {\r\n        const result = calculate(prevState.previousValue, inputValue, prevState.operation);\r\n        return {\r\n          display: formatDisplay(result),\r\n          previousValue: operation === '=' ? null : result,\r\n          operation: operation === '=' ? null : operation,\r\n          waitingForOperand: operation === '=' ? false : true,\r\n        };\r\n      } catch (error) {\r\n        return {\r\n          ...initialState,\r\n          display: 'Error',\r\n        };\r\n      }\r\n    }\r\n    \r\n    return {\r\n      ...prevState,\r\n      operation,\r\n      waitingForOperand: true,\r\n    };\r\n  };\r\n\r\n  const reset = useCallback(() => {\r\n    setState(initialState);\r\n  }, []);\r\n\r\n  // 키보드 이벤트 핸들러\r\n  const handleKeyDown = useCallback((event: KeyboardEvent) => {\r\n    if (!enableKeyboard) return;\r\n    \r\n    const key = event.key;\r\n    const mappedKey = keyMapping[key];\r\n    \r\n    if (mappedKey) {\r\n      event.preventDefault();\r\n      handleInput(mappedKey);\r\n    }\r\n  }, [handleInput, enableKeyboard]);\r\n\r\n  // 키보드 이벤트 리스너 등록\r\n  useEffect(() => {\r\n    if (enableKeyboard) {\r\n      document.addEventListener('keydown', handleKeyDown);\r\n      return () => {\r\n        document.removeEventListener('keydown', handleKeyDown);\r\n      };\r\n    }\r\n  }, [handleKeyDown, enableKeyboard]);\r\n\r\n  return {\r\n    display: state.display,\r\n    handleInput,\r\n    reset,\r\n  };\r\n};\r\n","'use client'\r\nimport { CalculatorDisplay, CalculatorButton, useCalculator } from '@/shared';\r\nimport React from 'react';\r\nimport { CalculatorProps } from '@/shared/lib/types';\r\n\r\nexport const Calculator: React.FC<CalculatorProps> = ({ \r\n  className = '', \r\n  orientation = 'portrait',\r\n  theme,\r\n  enableKeyboard = true \r\n}) => {\r\n  const { display, handleInput } = useCalculator(enableKeyboard);\r\n\r\n  // 세로 레이아웃\r\n  const portraitLayout = [\r\n    ['C', 'CE', '/', '*'],\r\n    ['7', '8', '9', '-'],\r\n    ['4', '5', '6', '+'],\r\n    ['1', '2', '3', '='],\r\n    ['0', '.'],\r\n  ];\r\n\r\n  // 가로 레이아웃 (더 넓은 형태)\r\n  const landscapeLayout = [\r\n    ['C', 'CE', '/', '*', '='],\r\n    ['7', '8', '9', '-', '0'],\r\n    ['4', '5', '6', '+', '.'],\r\n    ['1', '2', '3'],\r\n  ];\r\n\r\n  const buttonLayout = orientation === 'landscape' ? landscapeLayout : portraitLayout;\r\n  const isLandscape = orientation === 'landscape';\r\n\r\n  const defaultTheme = {\r\n    container: 'bg-gray-100',\r\n  };\r\n\r\n  const currentTheme = { ...defaultTheme, ...theme };\r\n  const containerClass = currentTheme.container || 'bg-gray-100';\r\n\r\n  return (\r\n    <div \r\n      className={`p-4 sm:p-6 rounded-xl shadow-lg mx-auto ${isLandscape ? 'max-w-2xl' : 'max-w-sm'} ${containerClass} ${className}`}\r\n    >\r\n      <CalculatorDisplay value={display} theme={theme} />\r\n      \r\n      <div className={`grid gap-2 sm:gap-3 ${isLandscape ? 'grid-cols-5' : 'grid-cols-4'}`}>\r\n        {buttonLayout.map((row, rowIndex) => \r\n          row.map((button, colIndex) => {\r\n            const isLastRow = rowIndex === buttonLayout.length - 1;\r\n            const isZeroButton = button === '0';\r\n            const isDecimalButton = button === '.';\r\n            \r\n            let buttonClass = '';\r\n            let variant: 'number' | 'operation' | 'function' = 'number';\r\n            \r\n            if (['+', '-', '*', '/', '='].includes(button)) {\r\n              variant = 'operation';\r\n            } else if (['C', 'CE'].includes(button)) {\r\n              variant = 'function';\r\n            }\r\n            \r\n            // 세로 레이아웃에서의 특별한 배치\r\n            if (!isLandscape) {\r\n              if (isZeroButton) {\r\n                buttonClass = 'col-span-2';\r\n              } else if (isDecimalButton && isLastRow) {\r\n                buttonClass = 'col-start-3';\r\n              }\r\n            }\r\n            \r\n            return (\r\n              <CalculatorButton\r\n                key={`${rowIndex}-${colIndex}`}\r\n                value={button}\r\n                onClick={handleInput}\r\n                variant={variant}\r\n                className={buttonClass}\r\n                theme={theme}\r\n              />\r\n            );\r\n          })\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n"],"names":["defaultTheme","numberButton","operationButton","functionButton","display","container","CalculatorDisplay","value","className","theme","currentTheme","Object","assign","displayClass","React","createElement","CalculatorButton","onClick","variant","variantClass","baseClasses","type","calculate","firstValue","secondValue","operation","Error","formatDisplay","Number","isNaN","isFinite","formatted","toFixed","parseFloat","toString","isOperation","includes","isNumber","test","isDecimalPoint","initialState","previousValue","waitingForOperand","keyMapping","useCalculator","enableKeyboard","state","setState","useState","handleInput","useCallback","input","prevState","handleNumberInput","handleDecimalPointInput","handleOperationInput","indexOf","inputValue","result","error","reset","handleKeyDown","event","key","mappedKey","preventDefault","useEffect","document","addEventListener","removeEventListener","Calculator","orientation","portraitLayout","landscapeLayout","buttonLayout","isLandscape","containerClass","map","row","rowIndex","button","colIndex","isLastRow","length","isZeroButton","isDecimalButton","buttonClass"],"mappings":"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"}